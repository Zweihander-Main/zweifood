!function(){var t=function(t,r,e,n){var i={version:"0.0.1"};t=t||[],i.gramSizeLower=e||2,i.gramSizeUpper=n||3,i.useLevenshtein="boolean"!=typeof r||r,i.exactSet={},i.matchDict={},i.items={};var a=function(t,r){for(var e,n,i=[],a=0;a<=r.length;a++)for(var h=0;h<=t.length;h++)n=a&&h?t.charAt(h-1)===r.charAt(a-1)?e:Math.min(i[h],i[h-1],e)+1:a+h,e=i[h],i[h]=n;return i.pop()},h=function(t,r){if(null===t&&null===r)throw"Trying to compare two null values";if(null===t||null===r)return 0;t=String(t),r=String(r);var e=a(t,r);return t.length>r.length?1-e/t.length:1-e/r.length},o=/[^\w, ]+/,s=function(t,r){r=r||2;var e="-"+t.toLowerCase().replace(o,"")+"-",n=r-e.length,i=[];if(n>0)for(var a=0;a<n;++a)t+="-";for(var a=0;a<e.length-r+1;++a)i.push(e.slice(a,a+r));return i},u=function(t,r){r=r||2;var e={},n=s(t,r),i=0;for(i;i<n.length;++i)n[i]in e?e[n[i]]+=1:e[n[i]]=1;return e};i.get=function(t,r){var e=this._get(t);return!e&&r?r:e},i._get=function(t){var r=this._normalizeStr(t),e=this.exactSet[r];if(e)return[[1,e]];for(var n=[],i=this.gramSizeUpper;i>=this.gramSizeLower;--i)if(n=this.__get(t,i))return n;return null},i.__get=function(t,r){function e(t){for(var r in t)if(t.hasOwnProperty(r))return!1;return!0}var n,i,a,o,s,c=this._normalizeStr(t),f={},l=u(c,r),g=this.items[r],m=0;for(n in l)if(i=l[n],m+=Math.pow(i,2),n in this.matchDict)for(a=0;a<this.matchDict[n].length;++a)o=this.matchDict[n][a][0],s=this.matchDict[n][a][1],o in f?f[o]+=i*s:f[o]=i*s;if(e(f))return null;var v,p=Math.sqrt(m),S=[];for(var z in f)v=f[z],S.push([v/(p*g[z][0]),g[z][1]]);var w=function(t,r){return t[0]<r[0]?1:t[0]>r[0]?-1:0};if(S.sort(w),this.useLevenshtein){for(var x=[],d=Math.min(50,S.length),a=0;a<d;++a)x.push([h(S[a][1],c),S[a][1]]);S=x,S.sort(w)}for(var x=[],a=0;a<S.length;++a)S[a][0]==S[0][0]&&x.push([S[a][0],this.exactSet[S[a][1]]]);return x},i.add=function(t){var r=this._normalizeStr(t);if(r in this.exactSet)return!1;var e=this.gramSizeLower;for(e;e<this.gramSizeUpper+1;++e)this._add(t,e)},i._add=function(t,r){var e=this._normalizeStr(t),n=this.items[r]||[],i=n.length;n.push(0);var a,h,o=u(e,r),s=0;for(a in o)h=o[a],s+=Math.pow(h,2),a in this.matchDict?this.matchDict[a].push([i,h]):this.matchDict[a]=[[i,h]];var c=Math.sqrt(s);n[i]=[c,e],this.items[r]=n,this.exactSet[e]=t},i._normalizeStr=function(t){if("[object String]"!==Object.prototype.toString.call(t))throw"Must use a string as argument to FuzzySet functions";return t.toLowerCase()},i.length=function(){var t,r=0;for(t in this.exactSet)this.exactSet.hasOwnProperty(t)&&(r+=1);return r},i.isEmpty=function(){for(var t in this.exactSet)if(this.exactSet.hasOwnProperty(t))return!1;return!0},i.values=function(){var t,r=[];for(t in this.exactSet)this.exactSet.hasOwnProperty(t)&&r.push(this.exactSet[t]);return r};var c=i.gramSizeLower;for(c;c<i.gramSizeUpper+1;++c)i.items[c]=[];for(c=0;c<t.length;++c)i.add(t[c]);return i},r=this;"undefined"!=typeof module&&module.exports?(module.exports=t,r.FuzzySet=t):r.FuzzySet=t}();