!function(r){r.doWhen=function(c){return r.Deferred(function(e){var t=r.extend({},{when:null,exec:function(){},interval:100,attempts:100,delayed:0},c,{checkId:null}),n=function(){if(!0===t.when())return t.exec.call(e.promise()),void e.resolve();t.checkId=setInterval(function(){0===t.attempts?(clearInterval(t.checkId),e.reject()):(--t.attempts,!0===t.when()&&(t.attempts=0,clearInterval(t.checkId),t.exec.call(e.promise()),e.resolve()))},t.interval)};0<t.delayed?setTimeout(n,Number(t.delayed)):n()}).promise()}}(jQuery);