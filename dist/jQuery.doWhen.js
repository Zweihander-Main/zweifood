!function(e){e.doWhen=function(t){return e.Deferred(function(n){var c=e.extend({},{when:null,exec:function(){},interval:100,attempts:100,delayed:0},t,{checkId:null}),r=function(){if(!0===c.when())return c.exec.call(n.promise()),void n.resolve();c.checkId=setInterval(function(){0===c.attempts?(clearInterval(c.checkId),n.reject()):(--c.attempts,!0===c.when()&&(c.attempts=0,clearInterval(c.checkId),c.exec.call(n.promise()),n.resolve()))},c.interval)};c.delayed>0?setTimeout(r,Number(c.delayed)):r()}).promise()}}(jQuery);